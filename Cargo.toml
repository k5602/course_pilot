
[package]
name = "course_pilot"
description = "Transform YouTube playlists into structured, intelligent study plans"
authors = ["k5602"]
version = "0.1.2"
edition = "2024"
readme = "README.md"
build = "build.rs"

[dependencies]

# Core UI framework
dioxus = { version = "0.7", features = ["desktop", "router"] }
dioxus-desktop = "0.7.3"

# UI Components & Styling
dioxus-free-icons = { version = "0.10", features = [
    "material-design-icons-action",
    "material-design-icons-navigation",
    "material-design-icons-av",
    "material-design-icons-content",
    "material-design-icons-social",
] }
dioxus-primitives = { git = "https://github.com/DioxusLabs/components", version = "0.0.1", default-features = false }
dioxus-motion = { version = "0.3.3", features = ["desktop"],default-features = false }

# Utilities
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
walkdir = "2.5.0"
dotenvy = "0.15"
rustls = { version = "0.23", features = ["ring"] }

# Async Runtime & Utilities
tokio = { version = "1", features = ["rt-multi-thread", "macros"] }
tokio-stream = "0.1.18"
tokio-util = { version = "0.7.18", features = ["full"] }
futures = "0.3.31"
futures-util = "0.3"

# Data Handling & Serialization
diesel = { version = "2.3", features = ["sqlite", "r2d2"] }
diesel_migrations = "2.3"
libsqlite3-sys = { version = "0.35", features = ["bundled"] }
uuid = { version = "1", features = ["v4", "serde"] }
chrono = { version = "0.4", features = ["serde"] }
pulldown-cmark = "0.12"
ammonia = "4.0"
mp4 = "0.14.0"
matroska = "0.30.0"

# Error Handling & Logging
anyhow = "1.0"
thiserror = "2.0"
log = "0.4"
env_logger = "0.11"
tracing = { version = "0.1", features = ["std"] }

# File & System Utilities
dirs = "6.0.0"
once_cell = "1.21"
tempfile = "3.24"
rfd = "0.17"

# App-specific Logic
reqwest = { version = "0.13.1", features = ["json"] }
discord-rich-presence = "1.0.0"

# YouTube
rusty_ytdl = { git = "https://github.com/k5602/rusty_ytdl", branch = "qol", features = [
    "search",
] }

# LLM (Gemini)
genai-rs = "0.6"

# YouTube Transcripts
yt-transcript-rs = "0.1"

# Secure Storage
keyring = { version = "3", features = ["linux-native"] }

[target.'cfg(windows)'.dependencies]
keyring = { version = "3", features = ["windows-native"] }

[target.'cfg(target_os = "linux")'.dependencies]
keyring = { version = "3", features = ["linux-native"] }

[profile.dev]
debug = 1 # Reduce debug info to save disk space and prevent Bus Error on CI

[profile.test]
debug = 1 # Reduce debug info for tests as well

[profile.release]
opt-level = "z"     # Optimize for size
lto = "thin"        # Use Thin LTO to reduce memory/disk pressure during linking
codegen-units = 16  # Increase units to parallelize and reduce resource usage
panic = "abort"     # Remove unwinding code for smaller binaries
strip = true        # Strip symbols to further reduce binary size

[patch.crates-io]
dioxus = { git = "https://github.com/k5602/dioxus", branch = "navigation_policy_hook", package = "dioxus" }
dioxus-desktop = { git = "https://github.com/k5602/dioxus", branch = "navigation_policy_hook", package = "dioxus-desktop" }
